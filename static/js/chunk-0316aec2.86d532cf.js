(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0316aec2"],{"079a":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return 0!==t.datasetList.length?a("div",{staticClass:"userinfo"},[a("div",{staticClass:"info"},[void 0!==t.datasetList[t.currentDataset]?a("el-dropdown",[a("span",{staticClass:"el-dropdown-link dropdown"},[t._v(" "+t._s(t.datasetList[t.currentDataset].dataset_name)+" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.datasetList,(function(e,n){return a("el-dropdown-item",{key:n,nativeOn:{click:function(e){return t.setCurrentSetData(n)}}},[t._v(t._s(e.dataset_name))])})),1)],1):t._e(),a("div",{staticClass:"info-con"},[t._v(" 数据量："+t._s(t.set_info.all)+" 未分配："+t._s(t.set_info.all-t.set_info.yes)+" 人员数："+t._s(t.set_info.no)+" 可分配："+t._s(t.max)+" "),a("div",{staticClass:"btn-ctro"},[t._v(" 用户名："),a("el-input",{staticClass:"input",attrs:{size:"mini",placeholder:"设置子用户用户名",clearable:""},model:{value:t.addusername,callback:function(e){t.addusername=e},expression:"addusername"}}),t._v(" 密码："),a("el-input",{staticClass:"input",attrs:{size:"mini",placeholder:"设置子用户密码",clearable:""},model:{value:t.addpassword,callback:function(e){t.addpassword=e},expression:"addpassword"}}),a("el-button",{attrs:{size:"mini"},on:{click:t.addsubuser}},[t._v("添加子用户")]),t.set_info.yes<=0?a("el-button",{attrs:{size:"mini"},on:{click:t.distribution}},[t._v("自动分配")]):t._e(),t.set_info.yes<=0?a("el-button",{attrs:{size:"mini"},on:{click:t.manualDistribution}},[t._v("分配")]):a("el-button",{attrs:{size:"mini"},on:{click:t.manualDistribution}},[t._v("重置")])],1)])],1),0!==t.tableData.length?a("div",{staticClass:"con"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"标注人员名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.username))]}}],null,!1,1495375691)}),a("el-table-column",{attrs:{label:"密码"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.operation?a("div",[a("el-input",{attrs:{size:"small",placeholder:"设置新密码",clearable:""},model:{value:e.row.password,callback:function(a){t.$set(e.row,"password",a)},expression:"scope.row.password"}})],1):a("div",[t._v("******")])]}}],null,!1,2635768564)}),a("el-table-column",{attrs:{label:"数量","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{attrs:{size:"small",min:0,max:1*e.row.num+t.max,label:"描述文字"},on:{change:t.handleChange},model:{value:e.row.num,callback:function(a){t.$set(e.row,"num",a)},expression:"scope.row.num"}})]}}],null,!1,3020303427)}),a("el-table-column",{attrs:{label:"操作","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.operation?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.determine(e.$index)}}},[t._v("确定")]):a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.changeOperation(e.$index)}}},[t._v("编辑")]),a("el-button",{staticClass:"delete",attrs:{type:"text",size:"small"},on:{click:function(a){return t.del(e.row.username,e.$index)}}},[t._v("删除")])]}}],null,!1,929996726)})],1)],1):a("div",[t._v(" 当前还没有子用户 ")])]):a("div",{staticClass:"userinfo"},[a("NoDataSet")],1)},s=[],i=(a("4160"),a("a434"),a("b0c0"),a("159b"),a("5530")),o=a("712e"),r=a("c24f"),u=a("1462"),c=a("2f62"),l=a("4360"),d=a("5d6b"),f={components:{NoDataSet:d["a"]},data:function(){return{set_info:{all:0,yes:0,no:0},addusername:"",addpassword:"",datasetList:[],selectListData:[],currentDataset:0,tableData:[],max:0}},computed:Object(i["a"])({},Object(c["b"])(["name"])),mounted:function(){this.init()},methods:{getRowKeys:function(t){return t.id},init:function(){-1===l["a"].state.my.currentset?this.currentDataset=0:this.currentDataset=l["a"].state.my.currentset,this.getDatasetList()},getDatasetList:function(){var t=this;Object(u["b"])().then((function(e){t.datasetList=e.data,console.log(0===e.data.length,"333"),0!==e.data.length&&t.getsubinfo()}))},getsubinfo:function(){var t=this;Object(u["g"])({dataset_id:this.datasetList[this.currentDataset].dataset_id}).then((function(e){t.set_info.all=e.data.set_info.all_num,t.set_info.yes=e.data.set_info.distribution_num,t.set_info.no=e.data.set_info.subuser_num,t.max=e.data.set_info.all_num-e.data.set_info.distribution_num,t.setTabelData(e.data.subuser_info)}))},setTabelData:function(t){var e=this;this.tableData=[],t.forEach((function(t){e.tableData.push({username:t.subuser_id,password:"",num:t.count,index:0,operation:!1})}))},setCurrentSetData:function(t){this.currentDataset=t,l["a"].commit("CURRENTSET",t),this.init()},toggleSelection:function(t){var e=this;t?t.forEach((function(t){e.$refs.multipleTable.toggleRowSelection(t)})):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(t){this.multipleSelection=t,this.selectListData=t},changeOperation:function(t){this.tableData[t].operation=!0},determine:function(t){""===this.tableData[t].password||this.resectPassword(this.tableData[t].username,this.tableData[t].password,t)},resectPassword:function(t,e,a){var n=this;console.log(t,e,"????????????"),e.length>=3?Object(r["a"])({username:t,password:e}).then((function(s){n.tableData[a].operation=!1,n.$message({message:"将用户"+t+"密码修改为"+e+"成功",type:"success",duration:3e3})})):this.$message({message:"密码不能小于三位",type:"waring",duration:1e3})},addsubuser:function(){var t=this;this.testing()&&Object(r["h"])({username:this.addusername,password:this.addpassword,admin_id:this.name}).then((function(e){t.$message({message:"添加成功！",type:"success"}),t.init()}))},testing:function(){return this.addusername.length>=3&&this.addpassword.length>=3?(console.log("初级验证通过"),!0):(this.$message({message:"标注人员用户名和密码不能少于三位",type:"warning"}),this.addusername.length>=3&&this.addpassword>=3)},distribution:function(){var t=this;0===this.selectListData.length?this.$message({message:"请选择要分配的标注人员",type:"warning"}):Object(o["f"])({dataset_id:this.datasetList[this.currentDataset].dataset_id,admin_id:this.name,worker_num:this.selectListData,flag:!0}).then((function(e){t.$message({message:"自动分配成功",type:"success",duration:1e3}),t.$router.push("/empty")}))},testing2:function(){var t=0;return this.selectListData.forEach((function(e){t+=e.num})),!(t<this.set_info.all)},manualDistribution:function(){var t=this;console.log("???"),this.set_info.yes<=0&&0===this.selectListData.length?this.$message({message:"请选择要分配的标注人员",type:"warning"}):this.testing2()?this.distributions():this.$confirm("当前尚未全部分配数据点击确认直接保存?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.distributions()})).catch((function(){}))},distributions:function(){var t=this;Object(o["e"])({dataset_id:this.datasetList[this.currentDataset].dataset_id,admin_id:this.name,worker_num:this.selectListData,flag:!0}).then((function(e){t.set_info.yes>0?t.$message({message:"当前分配数据已被重置",type:"success",duration:1e3}):t.$message({message:"分配成功",type:"success",duration:1e3}),t.$router.push("/empty")}))},handleChange:function(){var t=0;this.tableData.forEach((function(e){t+=e.num})),this.max=this.set_info.all-t},del:function(t,e){var a=this;console.log(t,e,"要删除的额人员"),Object(r["b"])({user_id:t}).then((function(t){a.$message({message:"删除成功",type:"success",duration:1e3}),a.tableData.splice(e,1)}))}}},h=f,m=(a("a620"),a("2877")),b=Object(m["a"])(h,n,s,!1,null,"00a95f59",null);e["default"]=b.exports},1462:function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"d",(function(){return i})),a.d(e,"e",(function(){return o})),a.d(e,"c",(function(){return r})),a.d(e,"f",(function(){return u})),a.d(e,"g",(function(){return c})),a.d(e,"a",(function(){return l}));var n=a("b775");function s(t){return Object(n["a"])({url:"/data/dataset_info_new",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/data/show_images_new",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/data/show_images_xy_new_only",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/data/dataset_errinfo_new",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/data/show_images_new",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/data/subuser_info_new",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/data/describe",method:"post",data:t})}},"5d6b":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label"},[a("div",{staticClass:"nodataset"},[t._v("当前数据集为空快去"),a("span",{staticStyle:{color:"red"},on:{click:function(e){return t.$router.push("/createData")}}},[t._v("创建一个数据集")]),t._v("吧！")])])},s=[],i=(a("df79"),a("2877")),o={},r=Object(i["a"])(o,n,s,!1,null,"dd182c5c",null);e["a"]=r.exports},"712e":function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"j",(function(){return i})),a.d(e,"f",(function(){return o})),a.d(e,"b",(function(){return r})),a.d(e,"h",(function(){return u})),a.d(e,"i",(function(){return c})),a.d(e,"c",(function(){return l})),a.d(e,"e",(function(){return d})),a.d(e,"d",(function(){return f})),a.d(e,"g",(function(){return h}));var n=a("b775");function s(t){return Object(n["a"])({url:"/data/create",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/data/label_image",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/data/distribute_images",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/data/user/create_errinfo",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/data/user/show_dataerr",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/data/user/show_dataerr_list",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/data/subuser/del_dataset",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/data/distribute_images_user",method:"post",data:t})}function f(t){return Object(n["a"])({url:"/data/del_img",method:"post",data:t})}function h(t){return Object(n["a"])({url:"/data/turn_down",method:"post",data:t})}},a434:function(t,e,a){"use strict";var n=a("23e7"),s=a("23cb"),i=a("a691"),o=a("50c4"),r=a("7b0b"),u=a("65f0"),c=a("8418"),l=a("1dde"),d=a("ae40"),f=l("splice"),h=d("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,b=Math.min,p=9007199254740991,_="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!f||!h},{splice:function(t,e){var a,n,l,d,f,h,g=r(this),w=o(g.length),v=s(t,w),D=arguments.length;if(0===D?a=n=0:1===D?(a=0,n=w-v):(a=D-2,n=b(m(i(e),0),w-v)),w+a-n>p)throw TypeError(_);for(l=u(g,n),d=0;d<n;d++)f=v+d,f in g&&c(l,d,g[f]);if(l.length=n,a<n){for(d=v;d<w-n;d++)f=d+n,h=d+a,f in g?g[h]=g[f]:delete g[h];for(d=w;d>w-n+a;d--)delete g[d-1]}else if(a>n)for(d=w-n;d>v;d--)f=d+n-1,h=d+a-1,f in g?g[h]=g[f]:delete g[h];for(d=0;d<a;d++)g[d+v]=arguments[d+2];return g.length=w-n+a,l}})},a620:function(t,e,a){"use strict";a("e39b")},d14a:function(t,e,a){},df79:function(t,e,a){"use strict";a("d14a")},e39b:function(t,e,a){}}]);